<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>react hooks ç¥ä¸‰å…ƒé¡¹ç›®è§£æ</title>
    <url>/home/2020/08/08/react_hooks%E8%A7%A3%E6%9E%90/</url>
    <content><![CDATA[<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bb214c8eefa047f6ac59cafad10b8428~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p>
<h2 id="å§å•¦å§å•¦"><a href="#å§å•¦å§å•¦" class="headerlink" title="å§å•¦å§å•¦"></a>å§å•¦å§å•¦</h2><p>&nbsp;&nbsp;&nbsp;&nbsp; è‡ªä»å¼„æ‡‚äº†ç¥ä¸‰å…ƒå¤§ç¥çš„ä½œå“ã€Šäº‘éŸ³æ‚¦ã€‹ï¼Œæ•´ä¸ªäººç¥æ¸…æ°”çˆ½ï¼Œé£˜é£˜æ¬²ä»™~ï¼Œæœ¬ç€å­¦ä¹ åº”è¯¥å…±åŒè¿›æ­¥çš„ç²¾ç¥ï¼Œæˆ‘å°†ä¸‰å…ƒé¡¹ç›®çš„ä¸€ä¸ªé¡µé¢æµç¨‹è¿›è¡Œäº†ä¸€ä¸ªç»†è‡´çš„è®²è§£ã€‚æ˜¯çš„ï¼Œä½ æ²¡æœ‰å¬é”™ï¼Œæ˜¯æµç¨‹ã€‚æˆ‘ç›¸ä¿¡æœ‰å¾ˆå¤šäººæ‹¿åˆ°ä¸€ä¸ªå¼€æºé¡¹ç›®å¸Œæœ›èƒ½å¤Ÿå¼„æ‡‚ï¼Œä½†æ˜¯ä¸€ä¸ªé¡¹ç›®è‚¯å®šæ˜¯å¾ˆå¤§çš„ï¼Œä¸çŸ¥ä»ä½•ä¸‹æ‰‹ï¼Œæ¯ä¸ªç»„ä»¶ä¸æ¯ä¸ªç»„ä»¶ä¹‹é—´æœ‰ç€åƒä¸ä¸‡ç¼•çš„è”ç³»ï¼Œäºæ˜¯ï¼Œæƒ³æƒ³è¿˜æ˜¯ç®—äº†å§ã€‚<br> <a id="more"></a><br>&nbsp;&nbsp;&nbsp;&nbsp; åœ¨è¿™é‡Œæˆ‘å°†ä»é›¶å¼€å§‹æ­å»ºè¿™ä¸ªé¡¹ç›®ï¼Œä¸€æ­¥ä¸€æ­¥çš„å°†é¡¹ç›®çš„çœŸé¢ç›®éœ²å‡ºæ¥ï¼Œéœ€è¦è¯´æ˜çš„æ˜¯ï¼Œæˆ‘åœ¨è¿™é‡Œä»…ä»…åªæ˜¯å¯¹ä¸‰å…ƒé¡¹ç›®çš„ä»£ç è¿›è¡Œäº† cvå¤§æˆ˜(ç²˜è´´å¤åˆ¶)ï¼Œå½“ç„¶cvä¸æ˜¯è¯´æ¯ä¸ªæ–‡ä»¶ä¸€æ¬¡æ€§å…¨éƒ¨å¤åˆ¶ï¼Œè€Œæ˜¯æœ‰é€‰æ‹©æ€§çš„å°†æµç¨‹èƒ½å¤Ÿèµ°é€šã€‚</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp; å¦‚ä¸‹å›¾å°±æ˜¯æˆ‘ä»¬è¦å®Œæˆçš„ä¸€ä¸ªé¡µé¢ï¼Œå…¶ä»–çš„é¡µé¢ä¹Ÿæ˜¯ç±»ä¼¼ï¼Œå®Œæˆè¿™ä¸ªé¡µé¢å…¶å®èƒ½è¯´æ˜å¾ˆå¤šé—®é¢˜äº†ï¼Œè¿™ä¸ªé¡µé¢æœ‰ä»åç«¯è¯·æ±‚æ•°æ®ï¼Œæœ‰reduxç®¡ç†æ•°æ®ï¼Œæœ‰è½®æ’­å›¾ã€‚ã€‚ã€‚ ä¸å¤šè¯´äº†ï¼Œè¿›å…¥æ­£é¢˜å§!</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fe073fc746284b9889f0853fbce28886~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p>
<h2 id="æŠ€æœ¯æ ˆ"><a href="#æŠ€æœ¯æ ˆ" class="headerlink" title="æŠ€æœ¯æ ˆ"></a>æŠ€æœ¯æ ˆ</h2><ul>
<li>react </li>
<li>styled.components ä½¿å¾—cssåœ¨jsæ–‡ä»¶å¯ä»¥ä¹¦å†™</li>
<li>hooks  reactæ–°ç‰¹æ€§</li>
<li>redux  çŠ¶æ€ç®¡ç†</li>
<li>immutable  ä¼˜åŒ–æ€§èƒ½</li>
<li>better-scroll  ä¸€ä¸ªæ¯”è¾ƒå¥½çš„æ»šåŠ¨ä¸‹æ‹‰ç»„ä»¶</li>
<li>react-router-config  å°†è·¯ç”±å…¨éƒ¨ç»Ÿä¸€ç®¡ç†<blockquote style="color:black;background:#f8f8f8">
æ³¨æ„: è¿™äº›çŸ¥è¯†ç‚¹ä½ éƒ½è¦æŒæ¡(è‡³å°‘è¦äº†è§£ä»–ä»¬æ˜¯ä»€ä¹ˆ)ï¼Œä¸ç„¶é£Ÿèµ·æ¥å¯èƒ½ä¼šæœ‰ç‚¹ç—›è‹¦å“¦~
</blockquote>
## é¡¹ç›®ç›®å½•ç»“æ„

</li>
</ul>
<details style="background:#d0edf5"> 
<summary>ç›®å½•</summary>

<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3fed20cb2352429d8bac4cd82516ad11~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p>
</details>

<p>src</p>
<ul>
<li><p>api å‰åç«¯æ•°æ®æ¥å£ ä»¥åŠä¸€äº›é…ç½®æ–‡ä»¶</p>
</li>
<li><p>application é¡µé¢ç»„ä»¶ä»¥åŠæ¯ä¸ªç»„ä»¶çš„store</p>
</li>
<li><p>assets é™æ€èµ„æºç›®å½•ï¼Œä¸»è¦æ”¾iconfontsä»¥åŠå…¨å±€æ ·å¼</p>
</li>
<li><p>baseUI åŠŸèƒ½æ€§ç»„ä»¶ å¦‚ åŠ è½½ç»„ä»¶ æ»šåŠ¨æ¡ç­‰</p>
</li>
<li><p>components å…¬å…±ç»„ä»¶ å¦‚è½®æ’­å›¾</p>
</li>
<li><p>layouts æ¶‰åŠåˆ°è·¯ç”±,ç»„ä»¶åµŒå¥—</p>
</li>
<li><p>routes  è·¯ç”±ï¼Œä½¿ç”¨react-router-config</p>
</li>
<li><p>store å…¨å±€ redux ä»“åº“</p>
<h2 id="å¼€å§‹å·¥ä½œ"><a href="#å¼€å§‹å·¥ä½œ" class="headerlink" title="å¼€å§‹å·¥ä½œ"></a>å¼€å§‹å·¥ä½œ</h2><h3 id="1-é…ç½®è·¯ç”±"><a href="#1-é…ç½®è·¯ç”±" class="headerlink" title="1. é…ç½®è·¯ç”±"></a>1. é…ç½®è·¯ç”±</h3><p>srcä¸‹åˆ›å»º routes æ–‡ä»¶å¤¹ å»ºindex.jsæ–‡ä»¶</p>
<details style="background:#d0edf5"> 
<summary>index.js</summary>
<pre><code >
import React, { lazy, Suspense } from "react";
import { Redirect } from "react-router-dom";
import HomeLayout from "../layouts/HomeLayout";
import BlankLayout from "../layouts/BlankLayout";

<p>// è·¯ç”±æ‡’åŠ è½½<br>const SuspenseComponent = Component =&gt; props =&gt; {<br>  return (</p>
<pre><code>&lt;Suspense fallback={null}&gt;
  &lt;Component {...props}&gt;&lt;/Component&gt;
&lt;/Suspense&gt;</code></pre><p>  )<br>}<br>// ç»„ä»¶æ‡’åŠ è½½<br>const RecommendComponent = lazy(() =&gt; import(â€œ../application/Recommend/â€œ));</p>
<p>export default [<br>  {</p>
<pre><code>component: BlankLayout,
routes: [
  {
    path: &quot;/&quot;,
    component: HomeLayout,
    routes: [
      {
        path: &quot;/&quot;,
        exact: true,
        render: () =&gt; &lt;Redirect to={&quot;/recommend&quot;} /&gt;,
      },
      {
        path: &quot;/recommend&quot;,
        component:  SuspenseComponent(RecommendComponent),
      },
    ],
  },
],</code></pre><p>  },<br>];<br></code></pre></p>
</details>

</li>
</ul>
<p>è¿™ç§é…ç½®è·¯ç”±çš„æ–¹å¼ä¸ä¹‹å‰æ™®é€šçš„åŒºåˆ«å¯èƒ½æœ‰ç‚¹å¤§ï¼Œä¸äº†è§£çš„å»ºè®®å……ä¸ªç”µ(react-router-config) <br/><br>åœ¨è¿™é‡ŒBlankLayoutæ˜¯å…¨å±€ç»„ä»¶ï¼Œåœ¨å®ƒä¸‹é¢æ”¾ç½®æ‰€æœ‰è·¯ç”±çº§åˆ«ç»„ä»¶ï¼ŒHomeLayoutä¸‹æ‰€æœ‰è·¯ç”±çº§åˆ«ç»„ä»¶ä¹Ÿéƒ½å½’HomeLayoutç®¡ç†ï¼Œè¿™é‡Œæˆ‘ä»¬çœ‹åˆ°çš„åªæœ‰recommendç»„ä»¶ï¼Œè¿™ä¹Ÿå°±æ˜¯<code style="color:red;">é€çº§åµŒå¥—</code>ã€‚æ‰€æœ‰çš„è·¯ç”±éƒ½æ”¾åœ¨è¿™é‡Œç»Ÿä¸€ç®¡ç†ï¼Œä¹‹å‰æ™®é€šè·¯ç”±æ˜¯å“ªä¸ªç»„ä»¶éœ€è¦è·¯ç”±æ‰åˆ°å“ªä¸ªç»„ä»¶ä¸‹é¢å†™ï¼Œç®¡ç†ä¸æ–¹ä¾¿ã€‚</p>
<h3 id="2-åˆ›å»ºlayoutsæ–‡ä»¶å¤¹"><a href="#2-åˆ›å»ºlayoutsæ–‡ä»¶å¤¹" class="headerlink" title="2. åˆ›å»ºlayoutsæ–‡ä»¶å¤¹"></a>2. åˆ›å»ºlayoutsæ–‡ä»¶å¤¹</h3><p>å»º BlankLayout.js ä»¥åŠ HomeLayout.js<br/><br> &nbsp;&nbsp; BlankLayout.jsä¸‹æ˜¯å…¨å±€ç»„ä»¶ï¼ŒHomeLayoutä¸‹æ”¾çš„æ˜¯recommend singers,rank ä¸‰å¤§ç»„ä»¶ï¼Œç”±äºæ•´ä¸ªé¡¹ç›®è¿‡å¤šï¼Œè¿™é‡Œæˆ‘ä»¬åªä»‹ç»recommendé¡µé¢ï¼Œå½“ç„¶ï¼Œå¦‚æœrecommendé¡µé¢ä¼šå†™äº†ï¼Œé‚£ä¹ˆå…¶ä»–é¡µé¢å…¶å®éƒ½æ˜¯ç±»ä¼¼çš„æ“ä½œ</p>
<details style="background:#d0edf5"> 
<summary>BlankLayout.js</summary>
<pre><code>
  import React from "react";
  import { renderRoutes } from "react-router-config";
  // ä»æˆ‘ä»¬åˆšåˆšé…ç½®çš„è·¯ç”±å¯çŸ¥ è¿™ä¸ªç»„ä»¶æ˜¯æœ€å¤–å±‚ç»„ä»¶ æ‰€æœ‰è·¯ç”±çº§åˆ«ç»„ä»¶éƒ½åœ¨è¿™
  const Layout = ({ route }) => <>{renderRoutes(route.routes)}</>;
  export default Layout
</code></pre>
</details>
<br/>
<details  style="background:#d0edf5"> 
<summary>HomeLayout.js</summary>

<pre><code>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; renderRoutes &#125; <span class="keyword">from</span> <span class="string">"react-router-config"</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Home</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; route &#125; = props;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &#123;<span class="comment">/* å°†HomeLayoutçš„å­ç»„ä»¶éƒ½æ”¾åˆ°è¿™é‡Œ */</span>&#125;</span><br><span class="line">      &#123;renderRoutes(route.routes)&#125;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">export default React.memo(Home);</span></span><br></pre></td></tr></table></figure>
</code></pre>
</details>
å¯ä»¥çœ‹åˆ°è¿™æ ·ç”¨åˆ°äº† renderRoutes,æ ¹æ® routes é‡Œé¢çš„å†…å®¹ï¼ŒHomeLayout æ˜¯ BlankLayout å­è·¯ç”±ï¼Œå¹¶ä¸”åœ¨ BlankLayout ä¸‹é¢æœ‰å­è·¯ç”± recommend, æ‰€ä»¥å°†renderRoutesæ”¾åœ¨ HomeLayout ä¸‹é¢ã€‚(route)

<h3 id="3-åˆ›å»ºapplicationç›®å½•"><a href="#3-åˆ›å»ºapplicationç›®å½•" class="headerlink" title="3. åˆ›å»ºapplicationç›®å½•"></a>3. åˆ›å»ºapplicationç›®å½•</h3><p>åˆ›å»ºRecommendå­ç›®å½•,Recomendä¸‹åˆ›å»ºindex.js</p>
<details style="background:#d0edf5">
<summary>index.js</summary>

<p>  <img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2b38247c98864367a768f858f2241faa~tplv-k3u1fbpfcp-zoom-1.image" alt=""> </p>
</details>


<p>ç°åœ¨è¿˜ä¸èƒ½è¿è¡Œï¼Œå› ä¸ºåœ¨app.jsä¸­æ²¡æœ‰å¯¼å…¥è·¯ç”±(ç”±äºdivä¼šè¢«ç¼–è¾‘å™¨åƒæ‰ğŸ˜‚ï¼ŒæŸäº›åœ°æ–¹åªèƒ½ä¸Šå›¾ç‰‡)</p>
<h3 id="4-æ¥åˆ°App-js"><a href="#4-æ¥åˆ°App-js" class="headerlink" title="4. æ¥åˆ°App.js"></a>4. æ¥åˆ°App.js</h3><details style="background:#d0edf5;"> 
<summary>App.js</summary>
<pre><code >
    <figure class="highlight js"><table><tr><td class="code"><pre><span class="line">    <span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line">    <span class="keyword">import</span> routes <span class="keyword">from</span> <span class="string">"./routes/index.js"</span>;</span><br><span class="line">    <span class="keyword">import</span> &#123; renderRoutes &#125; <span class="keyword">from</span> <span class="string">"react-router-config"</span>;</span><br><span class="line">    <span class="keyword">import</span> &#123; HashRouter &#125; <span class="keyword">from</span> <span class="string">"react-router-dom"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> (</span><br><span class="line">          &lt;HashRouter&gt;</span><br><span class="line">            &#123;renderRoutes(routes)&#125;</span><br><span class="line">          &lt;<span class="regexp">/HashRouter&gt;</span></span><br><span class="line"><span class="regexp">      );</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">    export default App;</span></span><br><span class="line"><span class="regexp">    ```	</span></span><br><span class="line"><span class="regexp">&lt;/</span>code&gt;&lt;<span class="regexp">/pre&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;/</span>details&gt;</span><br><span class="line"></span><br><span class="line">æˆ‘ä»¬å°† routesé‡Œé¢çš„æ–‡ä»¶å¯¼å…¥åˆ°äº†renderRoutes,renderRouteså°±å¯ä»¥æ ¹æ®routesé‡Œé¢çš„ç»„ä»¶åœ¨å…¶ä»–ç»„ä»¶ä¸‹æ”¾å…¥å…¶ä»–ç»„ä»¶äº†(å°±é—®ä½ ç»•ä¸ç»•ï¼Œæ­¤å…¶ä»–éå½¼å…¶ä»–ğŸ¤”)ã€‚è¿™ä¸ªç†è§£äº†å…¶å®ç”¨èµ·æ¥æ„Ÿè§‰ä¼šå¾ˆæ–¹ä¾¿ã€‚</span><br><span class="line">åˆ°è¿™æˆ‘ä»¬å®‰è£…ä¸¤ä¸ªåŒ…</span><br><span class="line"><span class="string">``</span><span class="string">`js</span></span><br><span class="line"><span class="string">yarn add react-router-config</span></span><br><span class="line"><span class="string">yarn add react-router-dom</span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>	</span><br><span class="line">è¿™ä¸ªæ—¶å€™é¡¹ç›®å°±å¯ä»¥è¿è¡Œèµ·æ¥äº†</span><br><span class="line">è¿è¡Œç»“æœå¦‚ä¸‹</span><br><span class="line">![](https:<span class="comment">//p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e34411e98093472aa5cb96792b861a35~tplv-k3u1fbpfcp-zoom-1.image)</span></span><br><span class="line">### 5. é…ç½® global-style.js æ–‡ä»¶ ä»¥åŠå…¨å±€æ ·å¼</span><br><span class="line">srcä¸‹åˆ›å»º assetsç›®å½•ï¼Œåˆ›å»ºè¯¥æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶æ˜¯é€šç”¨æ ·å¼æ–‡ä»¶(ä¸è¦ä¸å…¨å±€æ ·å¼æ··æ·†)ï¼Œæ¯”å¦‚ï¼Œè¯¥appçš„ä¸»é¢˜é¢œè‰²(ä½ æ‡‚çš„é¢œè‰²)åœ¨è®¸å¤šåœ°æ–¹éƒ½ä¼šç”¨åˆ°</span><br><span class="line">&lt;details style=<span class="string">"background:#d0edf5"</span>&gt;</span><br><span class="line">&lt;summary&gt;global-style.js&lt;<span class="regexp">/summary&gt;</span></span><br><span class="line"><span class="regexp">&lt;pre&gt;&lt;code&gt;</span></span><br><span class="line"><span class="regexp">    ```js</span></span><br><span class="line"><span class="regexp">    const extendClick = () =&gt; &#123;</span></span><br><span class="line"><span class="regexp">      return `</span></span><br><span class="line"><span class="regexp">        position: relative;</span></span><br><span class="line"><span class="regexp">        &amp;:before&#123;</span></span><br><span class="line"><span class="regexp">          content: '';</span></span><br><span class="line"><span class="regexp">          position: absolute;</span></span><br><span class="line"><span class="regexp">          top: -10px; bottom: -10px; left: -10px; right: -10px;</span></span><br><span class="line"><span class="regexp">        &#125;;</span></span><br><span class="line"><span class="regexp">      `;</span></span><br><span class="line"><span class="regexp">    &#125;;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">    const noWrap = () =&gt; &#123;</span></span><br><span class="line"><span class="regexp">      return `</span></span><br><span class="line"><span class="regexp">        text-overflow: ellipsis;</span></span><br><span class="line"><span class="regexp">        overflow: hidden;</span></span><br><span class="line"><span class="regexp">        white-space: nowrap;</span></span><br><span class="line"><span class="regexp">      `;</span></span><br><span class="line"><span class="regexp">    &#125;;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">    const bgFull = () =&gt; &#123;</span></span><br><span class="line"><span class="regexp">      return `</span></span><br><span class="line"><span class="regexp">        background-position: 50%;</span></span><br><span class="line"><span class="regexp">        background-size: contain;</span></span><br><span class="line"><span class="regexp">        background-repeat: no-repeat;</span></span><br><span class="line"><span class="regexp">      `</span></span><br><span class="line"><span class="regexp">    &#125;;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">    export default &#123;</span></span><br><span class="line"><span class="regexp">      "theme-color": "#d44439", /</span><span class="regexp">/ä»Šå¤©æœ‰ç»¿å—</span></span><br><span class="line"><span class="regexp">      "theme-color-shadow": "rgba(212, 68, 57, .5)",</span></span><br><span class="line"><span class="regexp">      "font-color-light": "#f1f1f1",</span></span><br><span class="line"><span class="regexp">      "font-color-light-shadow": "rgba(241, 241, 241, 0.6)",/</span><span class="regexp">/ç•¥æ·¡</span></span><br><span class="line"><span class="regexp">      "font-color-desc": "#2E3030",</span></span><br><span class="line"><span class="regexp">      "font-color-desc-v2": "#bba8a8", /</span><span class="regexp">/ç•¥æ·¡</span></span><br><span class="line"><span class="regexp">      "font-size-ss": "10px",</span></span><br><span class="line"><span class="regexp">      "font-size-s": "12px",</span></span><br><span class="line"><span class="regexp">      "font-size-m": "14px",</span></span><br><span class="line"><span class="regexp">      "font-size-l": "16px",</span></span><br><span class="line"><span class="regexp">      "font-size-ll": "18px",</span></span><br><span class="line"><span class="regexp">      "border-color": "#e4e4e4",</span></span><br><span class="line"><span class="regexp">      "border-color-v2": "rgba(228, 228, 228, 0.1)",</span></span><br><span class="line"><span class="regexp">      "background-color": "#f2f3f4",</span></span><br><span class="line"><span class="regexp">      "background-color-shadow": "rgba(0, 0, 0, 0.3)",</span></span><br><span class="line"><span class="regexp">      "highlight-background-color": "#fff",</span></span><br><span class="line"><span class="regexp">      "official-red": "#E82001",</span></span><br><span class="line"><span class="regexp">      extendClick,</span></span><br><span class="line"><span class="regexp">      noWrap,</span></span><br><span class="line"><span class="regexp">      bgFull</span></span><br><span class="line"><span class="regexp">    &#125;;</span></span><br><span class="line"><span class="regexp">    ```	</span></span><br><span class="line"><span class="regexp">&lt;/</span>code&gt;&lt;<span class="regexp">/pre&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>details&gt;</span><br><span class="line">å…¨å±€æ ·å¼ï¼Œè¿™ä¸ªæ ·å¼ä¸ä»…ä»…åœ¨è¿™é‡Œå¯ä»¥ç”¨åˆ°ï¼Œå…¶ä»–çš„é¡¹ç›®åŒæ ·å¯ä»¥å¼•å…¥</span><br><span class="line">&lt;details style=<span class="string">"background:#d0edf5"</span>&gt;</span><br><span class="line">&lt;summary&gt;style.js&lt;<span class="regexp">/summary&gt;</span></span><br><span class="line"><span class="regexp">&lt;pre&gt;&lt;code&gt;</span></span><br><span class="line"><span class="regexp">    ```js</span></span><br><span class="line"><span class="regexp">    import &#123; createGlobalStyle &#125; from 'styled-components'</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">    export const GlobalStyle = createGlobalStyle`</span></span><br><span class="line"><span class="regexp">        html, body, div, span, applet, object, iframe,</span></span><br><span class="line"><span class="regexp">        h1, h2, h3, h4, h5, h6, p, blockquote, pre,</span></span><br><span class="line"><span class="regexp">        a, abbr, acronym, address, big, cite, code,</span></span><br><span class="line"><span class="regexp">        del, dfn, em, img, ins, kbd, q, s, samp,</span></span><br><span class="line"><span class="regexp">        small, strike, strong, sub, sup, tt, var,</span></span><br><span class="line"><span class="regexp">        b, u, i, center,</span></span><br><span class="line"><span class="regexp">        dl, dt, dd, ol, ul, li,</span></span><br><span class="line"><span class="regexp">        fieldset, form, label, legend,</span></span><br><span class="line"><span class="regexp">        table, caption, tbody, tfoot, thead, tr, th, td,</span></span><br><span class="line"><span class="regexp">        article, aside, canvas, details, embed, </span></span><br><span class="line"><span class="regexp">        figure, figcaption, footer, header, hgroup, </span></span><br><span class="line"><span class="regexp">        menu, nav, output, ruby, section, summary,</span></span><br><span class="line"><span class="regexp">        time, mark, audio, video &#123;</span></span><br><span class="line"><span class="regexp">            margin: 0;</span></span><br><span class="line"><span class="regexp">            padding: 0;</span></span><br><span class="line"><span class="regexp">            border: 0;</span></span><br><span class="line"><span class="regexp">            font-size: 100%;</span></span><br><span class="line"><span class="regexp">            font: inherit;</span></span><br><span class="line"><span class="regexp">            vertical-align: baseline;</span></span><br><span class="line"><span class="regexp">        &#125;</span></span><br><span class="line"><span class="regexp">        /</span>* HTML5 display-role reset <span class="keyword">for</span> older browsers *<span class="regexp">/</span></span><br><span class="line"><span class="regexp">        article, aside, details, figcaption, figure, </span></span><br><span class="line"><span class="regexp">        footer, header, hgroup, menu, nav, section &#123;</span></span><br><span class="line"><span class="regexp">            display: block;</span></span><br><span class="line"><span class="regexp">        &#125;</span></span><br><span class="line"><span class="regexp">        body &#123;</span></span><br><span class="line"><span class="regexp">            line-height: 1;</span></span><br><span class="line"><span class="regexp">        &#125;</span></span><br><span class="line"><span class="regexp">        html, body&#123;</span></span><br><span class="line"><span class="regexp">            background: #f2f3f4;;</span></span><br><span class="line"><span class="regexp">        &#125;</span></span><br><span class="line"><span class="regexp">        ol, ul &#123;</span></span><br><span class="line"><span class="regexp">            list-style: none;</span></span><br><span class="line"><span class="regexp">        &#125;</span></span><br><span class="line"><span class="regexp">        blockquote, q &#123;</span></span><br><span class="line"><span class="regexp">            quotes: none;</span></span><br><span class="line"><span class="regexp">        &#125;</span></span><br><span class="line"><span class="regexp">        blockquote:before, blockquote:after,</span></span><br><span class="line"><span class="regexp">        q:before, q:after &#123;</span></span><br><span class="line"><span class="regexp">            content: '';</span></span><br><span class="line"><span class="regexp">            content: none;</span></span><br><span class="line"><span class="regexp">        &#125;</span></span><br><span class="line"><span class="regexp">        table &#123;</span></span><br><span class="line"><span class="regexp">            border-collapse: collapse;</span></span><br><span class="line"><span class="regexp">            border-spacing: 0;</span></span><br><span class="line"><span class="regexp">        &#125;</span></span><br><span class="line"><span class="regexp">        a&#123;</span></span><br><span class="line"><span class="regexp">            text-decoration: none;</span></span><br><span class="line"><span class="regexp">            color: #fff;</span></span><br><span class="line"><span class="regexp">        &#125;</span></span><br><span class="line"><span class="regexp">    `</span></span><br></pre></td></tr></table></figure>
</code></pre>
</details>


<h3 id="6-å¼€å§‹å†™å¤´éƒ¨"><a href="#6-å¼€å§‹å†™å¤´éƒ¨" class="headerlink" title="6. å¼€å§‹å†™å¤´éƒ¨"></a>6. å¼€å§‹å†™å¤´éƒ¨</h3><p>è¿™é‡Œæˆ‘ä»¬å°†ç”¨åˆ° æ¯”è¾ƒæ–°çš„çŸ¥è¯†<code style="color:red;">styled.components</code>ä»¥åŠéœ€è¦<code style="color:red;">iconfont</code> , æ¥åˆ°HomeLayoutä¸‹ï¼Œ</p>
<details style="background:#d0edf5">
<summary>HomeLayout.js</summary>

<p>   <img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/74e5ded5340f4cdf8a1cfb03661ad694~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p>
</details>

<p>è¿™é‡Œæˆ‘ä»¬å¯¼å…¥äº†HomeLayout.style.js(styled.componets)ä»¥åŠ<code style="color:red;"> &#xe65c;</code>(iconfont)ï¼ŒæœªåŠ iconfontç±»ä¼¼äºâ€˜å£â€™ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦åˆ›å»ºå®ƒä»¬ã€‚styled.componentså°±ç±»ä¼¼äºåœ¨jsæ–‡ä»¶é‡Œé¢å†™æ ·å¼ï¼Œå¹¶ä¸”è¯¥å®¹å™¨çš„classä¼šéšæœºç”Ÿæˆã€‚<br>ä»å¦‚ä¸‹ä»£ç æˆ‘ä»¬å¯ä»¥çœ‹åˆ°Topå°±æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œå®ƒçš„å­å®¹å™¨çš„æ ·å¼ä¹Ÿå¯ä»¥åœ¨è¿™é‡Œå†™ï¼Œç„¶åå¯¼å…¥ä¸Šé¢çš„HomeLayout.js.</p>
<h3 id="7-åœ¨åŒçº§ç›®å½•ä¸‹åˆ›å»ºHomeLayout-style-js"><a href="#7-åœ¨åŒçº§ç›®å½•ä¸‹åˆ›å»ºHomeLayout-style-js" class="headerlink" title="7. åœ¨åŒçº§ç›®å½•ä¸‹åˆ›å»ºHomeLayout.style.js"></a>7. åœ¨åŒçº§ç›®å½•ä¸‹åˆ›å»ºHomeLayout.style.js</h3><details style="background:#d0edf5">
<summary>HomeLayout.style.js</summary>
<pre><code>
     <figure class="highlight js"><table><tr><td class="code"><pre><span class="line">    <span class="keyword">import</span> styled <span class="keyword">from</span> <span class="string">"styled-components"</span>;</span><br><span class="line">    <span class="keyword">import</span> style <span class="keyword">from</span> <span class="string">"../assets/global-style"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">export</span> <span class="keyword">const</span> Top = styled.div<span class="string">`</span></span><br><span class="line"><span class="string">      display: flex;</span></span><br><span class="line"><span class="string">      flex-direction: row;</span></span><br><span class="line"><span class="string">      justify-content: space-between;</span></span><br><span class="line"><span class="string">      padding: 5px 10px;</span></span><br><span class="line"><span class="string">      background: <span class="subst">$&#123;style[<span class="string">"theme-color"</span>]&#125;</span>;</span></span><br><span class="line"><span class="string">      &amp; &gt; span &#123;</span></span><br><span class="line"><span class="string">        line-height: 40px;</span></span><br><span class="line"><span class="string">        color: #f1f1f1;</span></span><br><span class="line"><span class="string">        font-size: 20px;</span></span><br><span class="line"><span class="string">        &amp;.iconfont &#123;</span></span><br><span class="line"><span class="string">          font-size: 25px;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">    `</span></span><br><span class="line">    <span class="string">``</span><span class="string">`	</span></span><br><span class="line"><span class="string">&lt;/code&gt;&lt;/pre&gt;</span></span><br><span class="line"><span class="string">&lt;/details&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">å°†è¿™æ®µä»£ç å¼•å…¥ä¹‹åå°±å¯ä»¥çœ‹åˆ°æ•ˆæœäº†</span></span><br><span class="line"><span class="string">æ­¤æ—¶è¿è¡Œç»“æœå¦‚ä¸‹</span></span><br><span class="line"><span class="string">![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/db7f42236a704b67b688b32e12d05ba1~tplv-k3u1fbpfcp-zoom-1.image)</span></span><br><span class="line"><span class="string">å› ä¸ºè¿˜æ²¡æœ‰é…ç½®iconfont,æ‰€ä»¥æ˜¯å¦‚ä¸Šæ•ˆæœ</span></span><br><span class="line"><span class="string">### 8. é…ç½®iconfont</span></span><br><span class="line"><span class="string">å¯ä»¥åˆ°icontfontå®˜ç½‘ä¸‹è½½æ‰€éœ€è¦çš„æ–‡ä»¶ï¼Œæ”¾åœ¨assetsç›®å½•ä¸‹ï¼Œç›®å½•å¦‚ä¸‹</span></span><br><span class="line"><span class="string">![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/be6982fc567b44fbb4bc65dd33c40730~tplv-k3u1fbpfcp-zoom-1.image)</span></span><br><span class="line"><span class="string">åœ¨å…¨å±€App.jså¼•å…¥icontfontæ–‡ä»¶ï¼ŒåŠ ä¸Šè¿™å‡ è¡Œä»£ç </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>js</span><br><span class="line"><span class="keyword">import</span> &#123; IconStyle &#125; <span class="keyword">from</span> <span class="string">"./assets/iconfont/iconfont"</span>;</span><br><span class="line">&lt;HashRouter&gt;</span><br><span class="line">   &lt;IconStyle&gt;&lt;<span class="regexp">/IconStyle&gt;</span></span><br><span class="line"><span class="regexp">   &#123;renderRoutes(routes)&#125;</span></span><br><span class="line"><span class="regexp">&lt;/</span>HashRouter&gt;</span><br><span class="line"><span class="string">``</span><span class="string">`	</span></span><br><span class="line"><span class="string">è¿è¡Œæ•ˆæœå¦‚ä¸‹ï¼Œå›¾æ ‡å‡ºæ¥äº†</span></span><br><span class="line"><span class="string">![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0e026c85b69742a0b092451a1c3ea771~tplv-k3u1fbpfcp-zoom-1.image)</span></span><br><span class="line"><span class="string">### 9. æ¥ç€åœ¨ HomeLayout.js å†™å¸ƒå±€</span></span><br><span class="line"><span class="string">åœ¨åŸæ¥çš„çš„åŸºç¡€ä¸ŠåŠ ä¸Šå¦‚ä¸‹ä»£ç &lt;Top&gt;ä¸‹é¢å†™</span></span><br><span class="line"><span class="string">&lt;details style="background:#d0edf5"&gt;</span></span><br><span class="line"><span class="string">&lt;summary&gt;HomeLayout.js&lt;/summary&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7903bf78b8da4471ac8759c6dc832ee1~tplv-k3u1fbpfcp-zoom-1.image)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;/details&gt;</span></span><br><span class="line"><span class="string">è¿™é‡Œæˆ‘ä»¬ç”¨NavLinkæŒ‡å‘äº†ä¸‰ä¸ªè·¯ç”±åœ°å€ï¼Œæˆ‘ä»¬ç›®å‰åªåšrecommend</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ä¸Šé¢å¼•å…¥äº† &lt;Tab&gt;&lt;TabItem&gt;,åœ¨HomeLayout.style.jså†™</span></span><br><span class="line"><span class="string">&lt;details style="background:#d0edf5"&gt;</span></span><br><span class="line"><span class="string">&lt;summary&gt;HomeLayout.style.js&lt;/summary&gt;</span></span><br><span class="line"><span class="string">&lt;pre&gt;&lt;code&gt;</span></span><br><span class="line"><span class="string">    `</span><span class="string">``</span>js</span><br><span class="line">    <span class="keyword">export</span> <span class="keyword">const</span> Tab = styled.div<span class="string">`</span></span><br><span class="line"><span class="string">      height: 44px;</span></span><br><span class="line"><span class="string">      display: flex;</span></span><br><span class="line"><span class="string">      flex-direction: row;</span></span><br><span class="line"><span class="string">      justify-content: space-around;</span></span><br><span class="line"><span class="string">      background: <span class="subst">$&#123;style[<span class="string">"theme-color"</span>]&#125;</span>;</span></span><br><span class="line"><span class="string">      a &#123;</span></span><br><span class="line"><span class="string">        flex: 1;</span></span><br><span class="line"><span class="string">        padding: 2px 0;</span></span><br><span class="line"><span class="string">        font-size: 14px;</span></span><br><span class="line"><span class="string">        color: #e4e4e4;</span></span><br><span class="line"><span class="string">        &amp;.selected &#123;</span></span><br><span class="line"><span class="string">          span &#123;</span></span><br><span class="line"><span class="string">            padding: 3px 0;</span></span><br><span class="line"><span class="string">            font-weight: 700;</span></span><br><span class="line"><span class="string">            color: #f1f1f1;</span></span><br><span class="line"><span class="string">            border-bottom: 2px solid #f1f1f1;</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">    `</span>;</span><br><span class="line">    <span class="keyword">export</span> <span class="keyword">const</span> TabItem = styled.div<span class="string">`</span></span><br><span class="line"><span class="string">      height: 100%;</span></span><br><span class="line"><span class="string">      display: flex;</span></span><br><span class="line"><span class="string">      flex-direction: row;</span></span><br><span class="line"><span class="string">      justify-content: center;</span></span><br><span class="line"><span class="string">      align-items: center;</span></span><br><span class="line"><span class="string">    `</span>;</span><br></pre></td></tr></table></figure>
</code></pre>
</details>

<p>é¡µé¢ç»“æœå¦‚ä¸‹<br><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9b730a1c6138498bb924dc87781220f9~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p>
<h3 id="10-æ¥åˆ°äº†éš¾ç‚¹é‡ç‚¹éƒ¨åˆ†ã€‚"><a href="#10-æ¥åˆ°äº†éš¾ç‚¹é‡ç‚¹éƒ¨åˆ†ã€‚" class="headerlink" title="10. æ¥åˆ°äº†éš¾ç‚¹é‡ç‚¹éƒ¨åˆ†ã€‚"></a>10. æ¥åˆ°äº†éš¾ç‚¹é‡ç‚¹éƒ¨åˆ†ã€‚</h3><p>å‰é¢çš„éƒ½æ˜¯ä¸€äº›åŸºç¡€çš„ä¸éœ€è¦ä»åç«¯è·å–æ•°æ®å°±å¯ä»¥å®Œæˆçš„ï¼Œä½†æ˜¯æ¥ä¸‹æ¥çš„å†…å®¹è½®æ’­å›¾ï¼Œä»¥åŠåˆ—è¡¨éƒ½æ˜¯éœ€è¦ä»åç«¯æ¥å£è¯·æ±‚æ•°æ®æ¸²æŸ“åˆ°é¡µé¢ã€‚<br>æ•°æ®æ‹¿åˆ°äº†ä¹Ÿéœ€è¦äººæ¥ç®¡ç†ï¼Œé‚£ä¹ˆè°å‘¢ï¼Œå°±æ˜¯ä½ åˆçˆ±åˆæ¨çš„<code style="color:red;">redux</code>ã€‚<br/><br>æ¥ä¸‹æ¥é¦–å…ˆå¾—å‡†å¤‡å¥½æ¥å£æ•°æ®<br>srcä¸‹åˆ›å»ºapiæ–‡ä»¶å¤¹ï¼Œåœ¨è¯¥æ–‡ä»¶å¤¹ä¸‹é…ç½®<code style="color:red;">config.js</code>æ–‡ä»¶ï¼Œ è¯¥æ–‡ä»¶ä¸€èˆ¬æ˜¯ç”¨æ¥é…ç½®é»˜è®¤åç«¯è¯·æ±‚æ¥å£è·¯å¾„</p>
<details style="background:#d0edf5">
<summary>config.js</summary>
<pre><code>
    <figure class="highlight js"><table><tr><td class="code"><pre><span class="line">    <span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">"axios"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">export</span> <span class="keyword">const</span> baseUrl = <span class="string">"http://neteasecloudmusicapi.zhaoboy.com"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºä¸€ä¸ªaxiosçš„å®ä¾‹åŠæ‹¦æˆªå™¨é…ç½®</span></span><br><span class="line">    <span class="keyword">const</span> axiosInstance = axios.create(&#123;</span><br><span class="line">      baseURL: baseUrl</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">// å“åº”æ‹¦æˆªå™¨ï¼Œåœ¨è·å–å“åº”ä¹‹å‰å¤„ç†æ•°æ®</span></span><br><span class="line">    axiosInstance.interceptors.response.use(</span><br><span class="line">      res =&gt; res.data,</span><br><span class="line">      err =&gt; &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(err, <span class="string">"ç½‘ç»œé”™è¯¯"</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="keyword">export</span> &#123; axiosInstance &#125;;</span><br><span class="line">    <span class="string">``</span><span class="string">`	</span></span><br><span class="line"><span class="string">&lt;/code&gt;&lt;/pre&gt;</span></span><br><span class="line"><span class="string">&lt;/details&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">### 11. åŒè·¯å¾„apiä¸‹åˆ›å»ºrequest.js</span></span><br><span class="line"><span class="string">è¯¥æ–‡ä»¶ç”¨æ¥å°è£… è¯·æ±‚æ¥å£ï¼Œé€šè¿‡è°ƒç”¨è¯¥å‡½æ•°å¯ä»¥è¯·æ±‚æ•°æ®</span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>js</span><br><span class="line"><span class="keyword">import</span> &#123; axiosInstance &#125; <span class="keyword">from</span> <span class="string">"./config"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getBannerRequest = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> axiosInstance.get(<span class="string">"/banner"</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="string">``</span><span class="string">`	</span></span><br><span class="line"><span class="string">### 12. åˆ›å»ºredux ä»“åº“</span></span><br><span class="line"><span class="string">éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œç¥ä¸‰å…ƒé¡¹ç›®ä¸­æ¯ä¸ªå¯¹åº”çš„è·¯ç”±ç»„ä»¶éƒ½æœ‰ä¸€ä¸ªstore,ç„¶åå°†æ‰€æœ‰çš„store(è¯¥storeä¸­æ²¡æœ‰storeæ–‡ä»¶ï¼Œä¸€ä¸ªé¡¹ç›®åªåº”è¯¥æœ‰ä¸€ä¸ªä»“åº“)å…¨éƒ¨å¼•å…¥åˆ°æœ€å¤–é¢çš„storeï¼Œè¿™æ ·å†™çš„ç†ç”±æ˜¯é€»è¾‘æ¸…æ™°ã€‚å¦‚æœä¸è¿™æ ·å†™å¾ˆå¤šactionæ”¾åˆ°ä¸€èµ·ï¼Œå¾ˆå¤šreduceræ”¾åˆ°ä¸€èµ·ï¼Œæ–‡ä»¶æ•°é‡å¯èƒ½ä¼šè¾ƒå¤§ï¼Œå¤´éƒ½å¤§äº†ã€‚&lt;br/&gt;</span></span><br><span class="line"><span class="string">é‚£ä¹ˆç”¨reduxæ€ä¹ˆç®¡ç†æ•°æ®å‘¢ï¼Ÿç®€å•è¯´å°±æ˜¯dispatch(action)å‘storeè¯·æ±‚æ•°æ®ï¼Œstoreåˆæ‰¾reducer,reducerå¯¹è¯·æ±‚çš„æ•°æ®è¿›è¡Œä¸€å®šçš„æ“ä½œï¼Œå­˜åˆ°store,åœ¨ç»„ä»¶ä¸­connectä¸€ä¸‹ï¼Œå†é€šè¿‡propsè·å–æ•°æ®</span></span><br><span class="line"><span class="string">![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ebdeb84be27e4f5aa2cbae6373e178e2~tplv-k3u1fbpfcp-zoom-1.image)</span></span><br><span class="line"><span class="string">æˆ‘ä»¬åœ¨Recommendä¸‹åˆ›å»ºstoreæ–‡ä»¶å¤¹ï¼Œåˆ†åˆ«åˆ›å»º     </span></span><br><span class="line"><span class="string">&lt;code style="color:red;"&gt;constants.js&lt;/code&gt;</span></span><br><span class="line"><span class="string">&lt;code style="color:red;"&gt;actionCreators.js&lt;/code&gt;</span></span><br><span class="line"><span class="string">&lt;code style="color:red;"&gt;reducer.js&lt;/code&gt;</span></span><br><span class="line"><span class="string">&lt;code style="color:red;"&gt;index.js&lt;/code&gt;</span></span><br><span class="line"><span class="string">#### 12.1 constants.js</span></span><br><span class="line"><span class="string">è¯¥æ–‡ä»¶åªæœ‰ä¸€è¡Œä»£ç ï¼Œä½œç”¨æ˜¯åŒºåˆ†ä¸åŒçš„actions </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>js</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> CHANGE_BANNER = <span class="string">'home/recommend/CHANGE_BANNER'</span>;</span><br><span class="line"><span class="string">``</span><span class="string">`	</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 12.2 actionCreators.js </span></span><br><span class="line"><span class="string">è¯¥æ–‡ä»¶ä¸­æœ‰ changeBannerList ç”¨æ¥æ”¹å˜çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯ä¼ è¿›æ¥ä»€ä¹ˆæ•°æ®å°±ä¿®æ”¹æˆä»€ä¹ˆæ•°æ®ï¼Œä½†æ˜¯ä¸ºäº†æ”¯æŒå¼‚æ­¥ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡ä¸‹é¢ä¸€ä¸ªgetBannerListæ¥è·å–æ•°æ®</span></span><br><span class="line"><span class="string">&lt;details style="background:#d0edf5"&gt; </span></span><br><span class="line"><span class="string">&lt;summary&gt;actionCreators.js&lt;/summary&gt;</span></span><br><span class="line"><span class="string">&lt;pre&gt;&lt;code&gt;</span></span><br><span class="line"><span class="string">     `</span><span class="string">``</span>js</span><br><span class="line">    <span class="keyword">import</span> * <span class="keyword">as</span> actionTypes <span class="keyword">from</span> <span class="string">'./constants'</span>;</span><br><span class="line">    <span class="keyword">import</span> &#123; fromJS &#125; <span class="keyword">from</span> <span class="string">'immutable'</span>;</span><br><span class="line">    <span class="keyword">import</span> &#123; getBannerRequest &#125; <span class="keyword">from</span> <span class="string">'../../../api/request'</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">export</span> <span class="keyword">const</span> changeBannerList = <span class="function">(<span class="params">data</span>) =&gt;</span> (&#123;</span><br><span class="line">      type: actionTypes.CHANGE_BANNER,</span><br><span class="line">      data: fromJS(data)</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">// è·å– è½®æ’­å›¾æ•°æ®</span></span><br><span class="line">    <span class="keyword">export</span> <span class="keyword">const</span> getBannerList = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="function">(<span class="params">dispatch</span>) =&gt;</span> &#123;</span><br><span class="line">        getBannerRequest().then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">const</span> action = changeBannerList(data.banners);</span><br><span class="line">          dispatch(action);</span><br><span class="line">        &#125;).catch(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="built_in">console</span>.log(<span class="string">"è½®æ’­å›¾æ•°æ®ä¼ è¾“é”™è¯¯"</span>);</span><br><span class="line">        &#125;) </span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="string">``</span><span class="string">`	</span></span><br><span class="line"><span class="string">&lt;/code&gt;&lt;/pre&gt;</span></span><br><span class="line"><span class="string">&lt;/details&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">æ³¨æ„ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œä½¿ç”¨äº†immutable,ä»¥åçš„æ–‡ä»¶ä¼šå¤§é‡ç”¨åˆ°immutable,ç®€å•ä»‹ç»ä¸‹ä½œç”¨: ä½¿ç”¨æ—§æ•°æ®åˆ›å»ºæ–°æ•°æ®æ—¶å¯ä»¥ä¿è¯æ–°æ•°æ®ä¸å˜ï¼Œå¹¶ä¸”åˆ›å»ºæ–°æ•°æ®çš„è¿‡ç¨‹ä¸­ä½¿ç”¨äº†ç»“æ„å…±äº«ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º</span></span><br><span class="line"><span class="string">![](https://user-gold-cdn.xitu.io/2018/4/4/1628e77dc419816b?imageslim)</span></span><br><span class="line"><span class="string">åœ¨ä¸Šé¢çš„ä»£ç ä¸­æˆ‘ä»¬å¯¼å…¥getBannerRequestçš„è¯·æ±‚ï¼ŒgetBannerList è¿”å›çš„æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬éœ€è¦åœ¨storeå¯¼å…¥redux-thunkåŒ…,è¿™æ˜¯åé¢å†™åˆ°çš„ã€‚&lt;br/&gt;</span></span><br><span class="line"><span class="string">#### 12.3 reducer.js</span></span><br><span class="line"><span class="string">reducer.js é¦–å…ˆåˆå§‹åŒ–bannerListçš„æ•°æ®ï¼Œç„¶åswitchä¸€é¡¿ç‹‚æ“ä½œ</span></span><br><span class="line"><span class="string">&lt;details style="background:#d0edf5"&gt; </span></span><br><span class="line"><span class="string">&lt;summary&gt;reducer.js&lt;/summary&gt;</span></span><br><span class="line"><span class="string">&lt;pre&gt;&lt;code&gt;</span></span><br><span class="line"><span class="string">    `</span><span class="string">``</span>js</span><br><span class="line">    <span class="keyword">import</span> * <span class="keyword">as</span> actionTypes <span class="keyword">from</span> <span class="string">'./constants'</span>;</span><br><span class="line">    <span class="keyword">import</span> &#123; fromJS &#125; <span class="keyword">from</span> <span class="string">'immutable'</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> defaultState = fromJS(&#123;</span><br><span class="line">      bannerList: [],</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">export</span> <span class="keyword">default</span> (state = defaultState, action) =&gt; &#123;</span><br><span class="line">      <span class="keyword">switch</span>(action.type) &#123;</span><br><span class="line">        <span class="keyword">case</span> actionTypes.CHANGE_BANNER:</span><br><span class="line">          <span class="keyword">return</span> state.set(<span class="string">'bannerList'</span>, action.data);</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">          <span class="keyword">return</span> state;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="string">``</span><span class="string">`	</span></span><br><span class="line"><span class="string">&lt;/code&gt;&lt;/pre&gt;</span></span><br><span class="line"><span class="string">&lt;/details&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 12.4 index.js</span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>js</span><br><span class="line"><span class="keyword">import</span> reducer <span class="keyword">from</span> <span class="string">'./reducer'</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> actionCreators <span class="keyword">from</span> <span class="string">'./actionCreators'</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> constants <span class="keyword">from</span> <span class="string">'./constants'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; reducer, actionCreators, constants &#125;;</span><br><span class="line"><span class="string">``</span><span class="string">`	</span></span><br><span class="line"><span class="string">å°†ä¸‰ä¸ªæ–‡ä»¶æ•´åˆï¼Œå¹¶å¯¼å‡º</span></span><br><span class="line"><span class="string">ä»¥ä¸Šæ˜¯Recommend é‡Œé¢çš„store,(å†æ¬¡è¯´æ˜: é‡Œé¢çš„storeæ˜¯æ²¡æœ‰ä»“åº“çš„ï¼Œç»Ÿä¸€æ”¾åˆ°å¤–é¢çš„ä»“åº“ç®¡ç†)ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»º å¤–é¢æœ€å¤§çš„store</span></span><br><span class="line"><span class="string">### 13. åœ¨src åˆ›å»º storeæ–‡ä»¶å¤¹(æœ€å¤–é¢çš„ä»“åº“)</span></span><br><span class="line"><span class="string">store ä¸‹åˆ›å»º reducer.js é›†åˆæ‰€æœ‰reducer, index.js ä»“åº“</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">reducer.js</span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>js</span><br><span class="line"><span class="keyword">import</span> &#123; combineReducers &#125; <span class="keyword">from</span> <span class="string">"redux-immutable"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; reducer <span class="keyword">as</span> recommendReducer &#125; <span class="keyword">from</span> <span class="string">"../application/Recommend/store/index"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> combineReducers(&#123;</span><br><span class="line">  recommend: recommendReducer,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="string">``</span><span class="string">`	</span></span><br><span class="line"><span class="string">index.js, è¿™é‡Œæˆ‘ä»¬å®‰è£…äº† redux-thunk,æ”¯æŒactionè¿”å›æ–¹æ³•</span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>js</span><br><span class="line"><span class="keyword">import</span> &#123; createStore, compose, applyMiddleware &#125; <span class="keyword">from</span> <span class="string">"redux"</span>;</span><br><span class="line"><span class="keyword">import</span> thunk <span class="keyword">from</span> <span class="string">"redux-thunk"</span>;</span><br><span class="line"><span class="keyword">import</span> reducer <span class="keyword">from</span> <span class="string">"./reducer"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> composeEnhancers = <span class="built_in">window</span>.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;</span><br><span class="line"><span class="keyword">const</span> store = createStore(reducer, composeEnhancers(applyMiddleware(thunk)));</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store;</span><br><span class="line"><span class="string">``</span><span class="string">`	</span></span><br><span class="line"><span class="string">14. åœ¨App.js å¼•å…¥store,ä½¿ä¹‹æˆä¸ºå…¨å±€ä»“åº“</span></span><br><span class="line"><span class="string">ç°åœ¨App.jsæ–‡ä»¶é•¿è¿™æ ·</span></span><br><span class="line"><span class="string">&lt;details style="background:#d0edf5"&gt; </span></span><br><span class="line"><span class="string">&lt;summary&gt;ä»£ç &lt;/summary&gt;</span></span><br><span class="line"><span class="string">&lt;pre&gt;&lt;code&gt;</span></span><br><span class="line"><span class="string">    `</span><span class="string">``</span>js</span><br><span class="line">    <span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line">    <span class="keyword">import</span> routes <span class="keyword">from</span> <span class="string">"./routes/index.js"</span>;</span><br><span class="line">    <span class="keyword">import</span> &#123; renderRoutes &#125; <span class="keyword">from</span> <span class="string">"react-router-config"</span>;</span><br><span class="line">    <span class="keyword">import</span> &#123; HashRouter &#125; <span class="keyword">from</span> <span class="string">"react-router-dom"</span>;</span><br><span class="line">    <span class="keyword">import</span> &#123; IconStyle &#125; <span class="keyword">from</span> <span class="string">"./assets/iconfont/iconfont"</span>;</span><br><span class="line">    <span class="keyword">import</span> &#123; Provider &#125; <span class="keyword">from</span> <span class="string">"react-redux"</span>;</span><br><span class="line">    <span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">"./store/index"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> (</span><br><span class="line">        &lt;Provider store=&#123;store&#125;&gt;</span><br><span class="line">          &lt;HashRouter&gt;</span><br><span class="line">            &lt;IconStyle&gt;&lt;<span class="regexp">/IconStyle&gt;</span></span><br><span class="line"><span class="regexp">            &#123;renderRoutes(routes)&#125;</span></span><br><span class="line"><span class="regexp">          &lt;/</span>HashRouter&gt;</span><br><span class="line">        &lt;<span class="regexp">/Provider&gt;</span></span><br><span class="line"><span class="regexp">      );</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">    export default App;</span></span><br><span class="line"><span class="regexp">    ```	</span></span><br><span class="line"><span class="regexp">&lt;/</span>code&gt;&lt;<span class="regexp">/pre&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>details&gt;</span><br><span class="line"></span><br><span class="line">éœ€è¦å¯¼å…¥ä¸€ä¸ªProviderï¼Œä½¿å¾—å…¨å±€éƒ½å¯ä»¥ä½¿ç”¨storeé‡Œé¢çš„æ•°æ®</span><br><span class="line">åˆ°è¿™é‡Œæˆ‘ä»¬ç»ˆäºæŠŠRecommendçš„æ•°æ®ç®¡ç†ç»™æå®šäº†ï¼Œä¸‹è½½å¿…è¦çš„åŒ…</span><br><span class="line">yarn add axios redux react-reudx immutable redux-immutable redux-thunk (å¯èƒ½ä¸å…¨)</span><br><span class="line">æ¥ä¸‹é‡Œå°±æ˜¯å¦‚ä½•å°†æ•°æ®æ¸²æŸ“åˆ°é¡µé¢äº†ã€‚</span><br><span class="line"></span><br><span class="line">### 15. æ¥åˆ°HomeLayoutçš„å­ç»„ä»¶Recommendä¸‹çš„ index.js ä¸­</span><br><span class="line">é¦–å…ˆæˆ‘ä»¬å…ˆé€šè¿‡connectæ‹¿åˆ°æ•°æ®</span><br><span class="line">&lt;details style=<span class="string">"background:#d0edf5"</span>&gt; </span><br><span class="line">&lt;summary&gt;index.js&lt;<span class="regexp">/summary&gt;</span></span><br><span class="line"><span class="regexp">&lt;pre&gt;&lt;code&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">![](https:/</span><span class="regexp">/p9-juejin.byteimg.com/</span>tos-cn-i-k3u1fbpfcp/<span class="number">4</span>b9db461c6ae4473ac4e8b4bafef023e~tplv-k3u1fbpfcp-zoom<span class="number">-1.</span>image)</span><br><span class="line"></span><br><span class="line">&lt;<span class="regexp">/code&gt;&lt;/</span>pre&gt;</span><br><span class="line">&lt;<span class="regexp">/details&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">connect ä¹‹åæ€ä¹ˆæ‹¿æ•°æ®å‘¢ï¼Ÿ é€šè¿‡propså¯ä»¥è·å–æ•°æ®ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥å†™å¦‚ä½•é€šè¿‡propsè·å–æ•°æ®</span></span><br><span class="line"><span class="regexp">&lt;details style="background:#d0edf5"&gt; </span></span><br><span class="line"><span class="regexp">&lt;summary&gt;index.js&lt;/</span>summary&gt;</span><br><span class="line">&lt;pre&gt;<span class="xml"><span class="tag">&lt;<span class="name">code</span>&gt;</span></span></span><br><span class="line"><span class="xml">```js</span></span><br><span class="line"><span class="xml">    function Recommend(props) &#123;</span></span><br><span class="line"><span class="xml">      const &#123; bannerList&#125; = props;</span></span><br><span class="line"><span class="xml">      const &#123; getBannerDataDispatch &#125; = props;</span></span><br><span class="line"><span class="xml">      useEffect(() =&gt; &#123;</span></span><br><span class="line"><span class="xml">        if(!bannerList.size)&#123;</span></span><br><span class="line"><span class="xml">          getBannerDataDispatch();</span></span><br><span class="line"><span class="xml">          console.log(bannerList);</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"><span class="xml">      &#125;, []);</span></span><br><span class="line"><span class="xml">      return (</span></span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          Recommend</span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      )</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br></pre></td></tr></table></figure>

<p></code></pre></p>
</details>

<p>åªè¦connectä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡propsæ‹¿åˆ°æ•°æ®äº†ï¼Œpropsä¹‹åè§£æ„åˆšåˆšä¸Šé¢çš„bannerListæ•°æ®å’ŒgetBannerDataDispatchæ–¹æ³•ï¼Œè°ƒç”¨è¯¥æ–¹æ³•ä¹‹åå°±å¯ä»¥è·å–æ•°æ®ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠå®ƒæ”¾åˆ°useEffect,ä¸­ï¼Œåˆ¤æ–­bannerListæ˜¯å¦ä¸ºç©ºï¼Œä¸ç”¨æ¯æ¬¡æ‰§è¡Œéƒ½è¯·æ±‚ä¸€æ¬¡æ•°æ®ã€‚æ‰“å°ä¹‹åæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¦‚ä¸‹ç»“æœ<br><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5cb087d9f61c41ad951e91be3ed40018~tplv-k3u1fbpfcp-zoom-1.image" alt=""><br>æ•°æ®æ‹¿åˆ°äº†ï¼Œç°åœ¨è¦åšè½®æ’­å›¾ï¼Œå› ä¸ºè½®æ’­å›¾å¯èƒ½å¤šä¸ªåœ°æ–¹éƒ½ä¼šç”¨åˆ°ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†å®ƒæ”¾åˆ°componentsç›®å½•ä¸‹</p>
<h3 id="16-åˆ›å»ºslider"><a href="#16-åˆ›å»ºslider" class="headerlink" title="16. åˆ›å»ºslider"></a>16. åˆ›å»ºslider</h3><p>åœ¨srcä¸‹åˆ›å»ºcomponentsæ–‡ä»¶å¤¹ï¼Œæ¥ç€åˆ›å»ºslideræ–‡ä»¶å¤¹ï¼Œåœ¨é‡Œé¢åˆ›å»º index.jså’Œstyle.js</p>
<p>style.js, è¿™æ˜¯ç»™swiperåŠ çš„æ ·å¼ï¼Œå¼•å…¥äº†Global-styleé‡Œé¢çš„ä¸»é¢˜é¢œè‰²</p>
<details style="background:#d0edf5"> 
<summary>style.js</summary>
<pre><code>
    <figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> styled <span class="keyword">from</span> <span class="string">'styled-components'</span>;</span><br><span class="line"><span class="keyword">import</span> style <span class="keyword">from</span> <span class="string">'../../assets/global-style'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> SliderContainer = styled.div<span class="string">`</span></span><br><span class="line"><span class="string">  position: relative;</span></span><br><span class="line"><span class="string">  box-sizing: border-box;</span></span><br><span class="line"><span class="string">  width: 100%;</span></span><br><span class="line"><span class="string">  height: 100%;</span></span><br><span class="line"><span class="string">  margin: auto;</span></span><br><span class="line"><span class="string">  background: white;</span></span><br><span class="line"><span class="string">  .before&#123;</span></span><br><span class="line"><span class="string">    position: absolute;</span></span><br><span class="line"><span class="string">    top: -300px;</span></span><br><span class="line"><span class="string">    height: 400px;</span></span><br><span class="line"><span class="string">    width: 100%;</span></span><br><span class="line"><span class="string">    background: <span class="subst">$&#123;style[<span class="string">"theme-color"</span>]&#125;</span>;</span></span><br><span class="line"><span class="string">    z-index: 1;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">  .slider-container&#123;</span></span><br><span class="line"><span class="string">    position: relative;</span></span><br><span class="line"><span class="string">    width: 98%;</span></span><br><span class="line"><span class="string">    height: 160px;</span></span><br><span class="line"><span class="string">    overflow: hidden;</span></span><br><span class="line"><span class="string">    margin: auto;</span></span><br><span class="line"><span class="string">    border-radius: 6px;</span></span><br><span class="line"><span class="string">    .slider-nav&#123;</span></span><br><span class="line"><span class="string">      position: absolute;</span></span><br><span class="line"><span class="string">      display: block;</span></span><br><span class="line"><span class="string">      width: 100%;</span></span><br><span class="line"><span class="string">      height: 100%;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    .swiper-pagination-bullet-active&#123;</span></span><br><span class="line"><span class="string">      background: <span class="subst">$&#123;style[<span class="string">"theme-color"</span>]&#125;</span>;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">`</span></span><br></pre></td></tr></table></figure>
</code></pre>
</details>
index.js
<details style="background:#d0edf5"> 
<summary>ä»£ç </summary>
<pre><code>
    <figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useEffect, useState &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">"swiper/swiper-bundle.min.css"</span>; <span class="comment">//è¿™é‡Œå¼•ç”¨çš„æ–¹å¼å·²ç»å‘ç”Ÿäº†å˜åŒ–</span></span><br><span class="line"><span class="keyword">import</span> Swiper <span class="keyword">from</span> <span class="string">"swiper"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; SliderContainer &#125; <span class="keyword">from</span> <span class="string">'./style'</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Slider</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [sliderSwiper, setSliderSwiper] = useState(<span class="literal">null</span>);</span><br><span class="line">  <span class="keyword">const</span> &#123; bannerList &#125; = props;</span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(bannerList.length &amp;&amp; !sliderSwiper)&#123;</span><br><span class="line">      <span class="keyword">let</span> sliderSwiper = <span class="keyword">new</span> Swiper(<span class="string">".slider-container"</span>, &#123;</span><br><span class="line">        loop: <span class="literal">true</span>,</span><br><span class="line">        autoplay: &#123;</span><br><span class="line">          delay: <span class="number">3000</span>,</span><br><span class="line">          disableOnInteraction: <span class="literal">false</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        pagination: &#123;<span class="attr">el</span>:<span class="string">'.swiper-pagination'</span>&#125;,</span><br><span class="line">      &#125;);</span><br><span class="line">      setSliderSwiper(sliderSwiper);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;, [bannerList.length, sliderSwiper])</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;SliderContainer&gt;</span><br><span class="line">       &lt;div className=<span class="string">"before"</span>&gt;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">       &lt;div className="slider-container"&gt;</span></span><br><span class="line"><span class="regexp">       &lt;div className="swiper-wrapper"&gt;</span></span><br><span class="line"><span class="regexp">         &#123;</span></span><br><span class="line"><span class="regexp">           bannerList.map(slider =&gt; &#123;</span></span><br><span class="line"><span class="regexp">             return (</span></span><br><span class="line"><span class="regexp">              &lt;div className="swiper-slide" key=&#123;slider.imageUrl&#125;&gt;</span></span><br><span class="line"><span class="regexp">                 &lt;div className="slider-nav"&gt;</span></span><br><span class="line"><span class="regexp">                 &lt;img src=&#123;slider.imageUrl&#125; width="100%" height="100%" alt="æ¨è" /</span>&gt;</span><br><span class="line">                 &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">                &lt;/</span>div&gt;</span><br><span class="line">             )</span><br><span class="line">           &#125;)</span><br><span class="line">         &#125;</span><br><span class="line">       &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">       &lt;div className="swiper-pagination"&gt;&lt;/</span>div&gt;</span><br><span class="line">       &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>SliderContainer&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> React.memo(Slider);</span><br></pre></td></tr></table></figure>
</code></pre>
</details>

<p>è¿™é‡Œä¸»è¦æ˜¯ä½¿ç”¨äº†swiper api, å…·ä½“ç”¨æ³•å¯ä»¥çœ‹<a href="https://www.swiper.com.cn/api/index.html" target="_blank" rel="noopener">swiperå®˜ç½‘</a>æœ‰è¯¦ç»†ä»‹ç»</p>
<h3 id="17-å¯¼å…¥slider"><a href="#17-å¯¼å…¥slider" class="headerlink" title="17. å¯¼å…¥slider"></a>17. å¯¼å…¥slider</h3><p>swiper å†™å®Œäº†ä¹‹åï¼Œæ¥åˆ°ï¼Œrecommend ä¸‹çš„index.js, é¦–å…ˆä¸ºindex.jså†™ä¸ªstyle.js</p>
<details style="background:#d0edf5"> 
<summary>style.js</summary>
<pre><code>
    <figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> styled <span class="keyword">from</span> <span class="string">'styled-components'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> Content = styled.div<span class="string">`</span></span><br><span class="line"><span class="string">    position: fixed;</span></span><br><span class="line"><span class="string">    top: 94px;</span></span><br><span class="line"><span class="string">    left: 0;</span></span><br><span class="line"><span class="string">    bottom: <span class="subst">$&#123;props =&gt; props.play &gt; <span class="number">0</span>?<span class="string">"60px"</span>: <span class="number">0</span>&#125;</span>;</span></span><br><span class="line"><span class="string">    width: 100%;</span></span><br><span class="line"><span class="string">`</span></span><br></pre></td></tr></table></figure>
</code></pre>
</details>

<p>åœ¨index.jsä¸­å¯¼å…¥Slider</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Content &#125; <span class="keyword">from</span> <span class="string">"./style"</span>;</span><br><span class="line"><span class="keyword">import</span> Slider <span class="keyword">from</span> <span class="string">"../../components/slider/"</span>;</span><br><span class="line"> <span class="keyword">const</span> bannerListJS = bannerList ? bannerList.toJS() : [];</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;Content &gt;</span><br><span class="line">      &lt;div&gt;<span class="xml"><span class="tag">&lt;<span class="name">Slider</span> <span class="attr">bannerList</span>=<span class="string">&#123;bannerListJS&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">Slider</span>&gt;</span></span>&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>Content&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨ index.jsåŠ ä¸Šä¸Šé¢è¿™å‡ å¥ä»£ç ä¹‹åå°±å¯ä»¥çœ‹åˆ°æ•ˆæœäº†,ä½†æ˜¯ä½ ä¼šå‘ç°headerè¢«è¦†ç›–äº†ï¼Œè¿™é‡Œå…¶å®æ˜¯ Sliderç»„ä»¶é‡Œé¢çš„beforeæçš„é¬¼ï¼Œ å¦‚æœè¦æ”¹è¿‡æ¥ä¹Ÿå¾ˆç®€å•ï¼Œåœ¨å®ƒçš„çˆ¶å®¹å™¨åŠ ä¸ªoverflow:hiddenå°±å¯ä»¥è§£å†³é—®é¢˜ï¼Œä½†æ˜¯ç°åœ¨å› ä¸ºæˆ‘ä»¬è¦åšæ»šåŠ¨(éœ€è¦ä¸Šä¸‹å¯ä»¥æ»šåŠ¨)ï¼Œæ»šåŠ¨ä¼šåšsliderçš„çˆ¶å®¹å™¨ï¼Œä¹Ÿä¼šæœ‰overflow:hidden,æ‰€ä»¥è¿™é‡Œå°±å…ˆä¸å¤„ç†ã€‚<br><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9f699119a0c646a48469b20202eebab5~tplv-k3u1fbpfcp-zoom-1.image" alt=""><br>ä½†æ˜¯æˆ‘ä»¬å‘ç°è¿™ä¸ªè½®æ’­å›¾æ˜¯ä¸èƒ½æ»šåŠ¨çš„ï¼Œå› ä¸ºæˆ‘ä»¬ç°åœ¨ç”¨çš„swiper æ˜¯swiper6æœ€æ–°ç‰ˆæœ¬ï¼Œå…·ä½“çš„å¯ä»¥çœ‹å®˜ç½‘å¦‚ä½•ä½¿ç”¨</p>
<h3 id="18-loadingç»„ä»¶"><a href="#18-loadingç»„ä»¶" class="headerlink" title="18. loadingç»„ä»¶"></a>18. loadingç»„ä»¶</h3><p>è®²è§£scrollç»„ä»¶åˆä¼šç‰µæ‰¯åˆ° loading ç»„ä»¶(åŠ è½½)å’Œ debounceå‡½æ•°(é˜²æŠ–)ï¼Œæ‰€ä»¥å¾—å…ˆå»ºloadingç»„ä»¶å’Œé˜²æŠ–å‡½æ•°<br>baseUIæ–‡ä»¶ä¸‹åˆ†åˆ«åˆ›å»ºloadingå’Œloading-v2æ–‡ä»¶å¤¹</p>
<p>loadingä¸­çš„æ–‡ä»¶</p>
<details style="background:#d0edf5"> 
<summary>index.js</summary>
<pre><code>
    <figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> styled, &#123; keyframes &#125; <span class="keyword">from</span> <span class="string">'styled-components'</span>;</span><br><span class="line"><span class="keyword">import</span> style <span class="keyword">from</span> <span class="string">'../../assets/global-style'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> loading = keyframes<span class="string">`</span></span><br><span class="line"><span class="string">  0%, 100% &#123;</span></span><br><span class="line"><span class="string">    transform: scale(0.0);</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">  50% &#123;</span></span><br><span class="line"><span class="string">    transform: scale(1.0);</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"><span class="keyword">const</span> LoadingWrapper = styled.div<span class="string">`</span></span><br><span class="line"><span class="string">    &gt;div &#123;</span></span><br><span class="line"><span class="string">      position: absolute;</span></span><br><span class="line"><span class="string">      top: 0; left: 0; right: 0; bottom: 0;</span></span><br><span class="line"><span class="string">      margin: auto;</span></span><br><span class="line"><span class="string">      width: 60px;</span></span><br><span class="line"><span class="string">      height: 60px;</span></span><br><span class="line"><span class="string">      opacity: 0.6;</span></span><br><span class="line"><span class="string">      border-radius: 50%;</span></span><br><span class="line"><span class="string">      background-color: <span class="subst">$&#123;style[<span class="string">"theme-color"</span>]&#125;</span>;</span></span><br><span class="line"><span class="string">      animation: <span class="subst">$&#123;loading&#125;</span> 1.4s infinite ease-in;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    &gt;div:nth-child(2) &#123;</span></span><br><span class="line"><span class="string">      animation-delay: -0.7s;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Loading</span>(<span class="params"></span>)  </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;LoadingWrapper&gt;</span><br><span class="line">      &lt;div&gt;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">      &lt;div&gt;&lt;/</span>div&gt;</span><br><span class="line">    &lt;<span class="regexp">/LoadingWrapper&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default React.memo(Loading);</span></span><br></pre></td></tr></table></figure>
</code></pre>
</details>
loading-v2ä¸­çš„æ–‡ä»¶
<details style="background:#d0edf5"> 
<summary>index.js</summary>
<pre><code>
    <figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> styled, &#123;keyframes&#125; <span class="keyword">from</span> <span class="string">'styled-components'</span>;</span><br><span class="line"><span class="keyword">import</span> style <span class="keyword">from</span> <span class="string">'../../assets/global-style'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> dance = keyframes<span class="string">`</span></span><br><span class="line"><span class="string">    0%, 40%, 100%&#123;</span></span><br><span class="line"><span class="string">      transform: scaleY(0.4);</span></span><br><span class="line"><span class="string">      transform-origin: center 100%;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    20%&#123;</span></span><br><span class="line"><span class="string">      transform: scaleY(1);</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"><span class="keyword">const</span> Loading = styled.div<span class="string">`</span></span><br><span class="line"><span class="string">    height: 10px;</span></span><br><span class="line"><span class="string">    width: 100%;</span></span><br><span class="line"><span class="string">    margin: auto;</span></span><br><span class="line"><span class="string">    text-align: center;</span></span><br><span class="line"><span class="string">    font-size: 10px;</span></span><br><span class="line"><span class="string">    &gt;div&#123;</span></span><br><span class="line"><span class="string">      display: inline-block;</span></span><br><span class="line"><span class="string">      background-color: <span class="subst">$&#123;style[<span class="string">"theme-color"</span>]&#125;</span>;</span></span><br><span class="line"><span class="string">      height: 100%;</span></span><br><span class="line"><span class="string">      width: 1px;</span></span><br><span class="line"><span class="string">      margin-right:2px;</span></span><br><span class="line"><span class="string">      animation: <span class="subst">$&#123;dance&#125;</span> 1s infinite;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    &gt;div:nth-child(2) &#123;</span></span><br><span class="line"><span class="string">      animation-delay: -0.4s;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    &gt;div:nth-child(3) &#123;</span></span><br><span class="line"><span class="string">      animation-delay: -0.6s;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    &gt;div:nth-child(4) &#123;</span></span><br><span class="line"><span class="string">      animation-delay: -0.5s;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    &gt;div:nth-child(5) &#123;</span></span><br><span class="line"><span class="string">      animation-delay: -0.2s;</span></span><br><span class="line"><span class="string">    &#125; </span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">LoadingV2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;Loading&gt;</span><br><span class="line">      &lt;div&gt;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">      &lt;div&gt;&lt;/</span>div&gt;</span><br><span class="line">      &lt;div&gt;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">      &lt;div&gt;&lt;/</span>div&gt;</span><br><span class="line">      &lt;div&gt;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">      &lt;span&gt;æ‹¼å‘½åŠ è½½ä¸­...&lt;/</span>span&gt;</span><br><span class="line">    &lt;<span class="regexp">/Loading&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default React.memo(LoadingV2);</span></span><br></pre></td></tr></table></figure>
</code></pre>
</details>

<p>è¿™ä¸¤ä¸ªæ–‡ä»¶éƒ½æ˜¯ç”¨animationåšçš„åŠ è½½åŠ¨ç”»ï¼Œå…·ä½“å°±ä¸ä»‹ç»äº†ï¼Œç¯‡å¹…è¿‡é•¿~</p>
<h3 id="19-debounce-å‡½æ•°"><a href="#19-debounce-å‡½æ•°" class="headerlink" title="19. debounce å‡½æ•°"></a>19. debounce å‡½æ•°</h3><p>é˜²æŠ–å‡½æ•°å»ºåœ¨ api çš„ utils.js ä¸­<br>ä»€ä¹ˆæ˜¯é˜²æŠ–</p>
<p><strong><em>ä¸¾ä¸ªæ —å­ï¼š</em></strong>æœ‰ä¸ªscrolläº‹ä»¶ï¼Œæ»šåŠ¨ä¼šä¸åœè§¦å‘å›æ»šåŠ¨äº‹ä»¶ï¼Œä»è€Œè°ƒç”¨ç»‘å®šçš„å›è°ƒå‡½æ•°ï¼Œæˆ‘ä»¬å¸Œæœ›å½“æˆ‘ä»¬åœæ­¢æ»šåŠ¨çš„æ—¶ï¼Œæ‰è§¦å‘ä¸€æ¬¡å›è°ƒï¼Œè¿™æ—¶å¯ä»¥ä½¿ç”¨å‡½æ•°é˜²æŠ–ã€‚</p>
<details style="background:#d0edf5"> 
<summary>ä»£ç </summary>
<pre><code>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> debounce = <span class="function">(<span class="params">func, delay</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> timer;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">...args</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(timer) &#123;</span><br><span class="line">      clearTimeout(timer);</span><br><span class="line">    &#125;</span><br><span class="line">    timer = setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      func.apply(<span class="keyword">this</span>, args);</span><br><span class="line">      clearTimeout(timer);</span><br><span class="line">    &#125;, delay);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">export</span> &#123; debounce &#125;</span><br></pre></td></tr></table></figure>
</code></pre>
</details>
è¿™æ˜¯ä¸‰å…ƒå†™çš„åŸç”Ÿjsé˜²æŠ–å‡½æ•°ï¼Œé˜²æŠ–åŸç†å°±æ˜¯ç¬¬ä¸€æ¬¡è§¦å‘æŸä¸ªå‡½æ•°ï¼Œåœ¨è§„å®šæ—¶é—´å†…å¦‚æœå†æ¬¡è§¦å‘å°±ä¼šé‡æ–°è®¡æ—¶ã€‚

<h3 id="20-scroll"><a href="#20-scroll" class="headerlink" title="20. scroll"></a>20. scroll</h3><p>å¥½äº†ï¼Œé¢„å¤‡å·¥ä½œå®Œæˆäº†ï¼Œå°±å¯ä»¥å†™äº†ï¼Œè¿™é‡Œå†è¯´æ˜ä¸€ä¸‹ï¼Œæˆ‘ç°åœ¨æ˜¯å°½å¯èƒ½çš„å¸®åŠ©å¤§å®¶æ¢³ç†å¦‚ä½•èƒ½å¤Ÿçœ‹æ‡‚ä¸€ä¸ªæ¯”è¾ƒå¥½çš„é¡¹ç›®ï¼Œå®ç°å¯ä»¥è‡ªå·±åŠ¨æ‰‹å®è·µ</p>
<details style="background:#d0edf5"> 
<summary>index.js</summary>
<pre><code>
    <figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123;</span><br><span class="line">  forwardRef,</span><br><span class="line">  useState,</span><br><span class="line">  useEffect,</span><br><span class="line">  useRef,</span><br><span class="line">  useImperativeHandle,</span><br><span class="line">  useMemo,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> PropTypes <span class="keyword">from</span> <span class="string">"prop-types"</span>;</span><br><span class="line"><span class="keyword">import</span> BScroll <span class="keyword">from</span> <span class="string">"better-scroll"</span>;</span><br><span class="line"><span class="keyword">import</span> styled <span class="keyword">from</span> <span class="string">"styled-components"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; debounce &#125; <span class="keyword">from</span> <span class="string">"../../api/utils"</span>;</span><br><span class="line"><span class="keyword">import</span> Loading <span class="keyword">from</span> <span class="string">'../loading/index'</span>;</span><br><span class="line"><span class="keyword">import</span> Loading2 <span class="keyword">from</span> <span class="string">'../loading-v2/index'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> ScrollContainer = styled.div<span class="string">`</span></span><br><span class="line"><span class="string">  width: 100%;</span></span><br><span class="line"><span class="string">  height: 100%;</span></span><br><span class="line"><span class="string">  overflow: hidden;</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> PullUpLoading = styled.div<span class="string">`</span></span><br><span class="line"><span class="string">  position: absolute;</span></span><br><span class="line"><span class="string">  left: 0;</span></span><br><span class="line"><span class="string">  right: 0;</span></span><br><span class="line"><span class="string">  bottom: 5px;</span></span><br><span class="line"><span class="string">  width: 60px;</span></span><br><span class="line"><span class="string">  height: 60px;</span></span><br><span class="line"><span class="string">  margin: auto;</span></span><br><span class="line"><span class="string">  z-index: 100;</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> PullDownLoading = styled.div<span class="string">`</span></span><br><span class="line"><span class="string">  position: absolute;</span></span><br><span class="line"><span class="string">  left: 0;</span></span><br><span class="line"><span class="string">  right: 0;</span></span><br><span class="line"><span class="string">  top: 0px;</span></span><br><span class="line"><span class="string">  height: 30px;</span></span><br><span class="line"><span class="string">  margin: auto;</span></span><br><span class="line"><span class="string">  z-index: 100;</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"><span class="keyword">const</span> Scroll = forwardRef(<span class="function">(<span class="params">props, ref</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [bScroll, setBScroll] = useState();</span><br><span class="line">  <span class="keyword">const</span> scrollContaninerRef = useRef();</span><br><span class="line">  <span class="keyword">const</span> &#123;</span><br><span class="line">    direction,</span><br><span class="line">    click,</span><br><span class="line">    refresh,</span><br><span class="line">    pullUpLoading,</span><br><span class="line">    pullDownLoading,</span><br><span class="line">    bounceTop,</span><br><span class="line">    bounceBottom,</span><br><span class="line">  &#125; = props;</span><br><span class="line">  <span class="keyword">const</span> &#123; pullUp, pullDown, onScroll &#125; = props;</span><br><span class="line">  <span class="keyword">let</span> pullUpDebounce = useMemo(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> debounce(pullUp, <span class="number">500</span>);</span><br><span class="line">  &#125;, [pullUp]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> pullDownDebounce = useMemo(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> debounce(pullDown, <span class="number">500</span>);</span><br><span class="line">  &#125;, [pullDown]);</span><br><span class="line"></span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> scroll = <span class="keyword">new</span> BScroll(scrollContaninerRef.current, &#123;</span><br><span class="line">      scrollX: direction === <span class="string">"horizental"</span>,</span><br><span class="line">      scrollY: direction === <span class="string">"vertical"</span>,</span><br><span class="line">      probeType: <span class="number">3</span>,</span><br><span class="line">      click: click,</span><br><span class="line">      bounce: &#123;</span><br><span class="line">        top: bounceTop,</span><br><span class="line">        bottom: bounceBottom,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">    setBScroll(scroll);</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      setBScroll(<span class="literal">null</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">// eslint-disable-next-line</span></span><br><span class="line">  &#125;, []);</span><br><span class="line"></span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!bScroll || !onScroll) <span class="keyword">return</span>;</span><br><span class="line">    bScroll.on(<span class="string">"scroll"</span>, onScroll);</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      bScroll.off(<span class="string">"scroll"</span>, onScroll);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;, [onScroll, bScroll]);</span><br><span class="line"></span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!bScroll || !pullUp) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">const</span> handlePullUp = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">//åˆ¤æ–­æ˜¯å¦æ»‘åŠ¨åˆ°äº†åº•éƒ¨</span></span><br><span class="line">      <span class="keyword">if</span> (bScroll.y &lt;= bScroll.maxScrollY + <span class="number">100</span>) &#123;</span><br><span class="line">        pullUpDebounce();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    bScroll.on(<span class="string">"scrollEnd"</span>, handlePullUp);</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      bScroll.off(<span class="string">"scrollEnd"</span>, handlePullUp);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;, [pullUp, pullUpDebounce, bScroll]);</span><br><span class="line"></span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!bScroll || !pullDown) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">const</span> handlePullDown = <span class="function">(<span class="params">pos</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">//åˆ¤æ–­ç”¨æˆ·çš„ä¸‹æ‹‰åŠ¨ä½œ</span></span><br><span class="line">      <span class="keyword">if</span> (pos.y &gt; <span class="number">50</span>) &#123;</span><br><span class="line">        pullDownDebounce();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    bScroll.on(<span class="string">"touchEnd"</span>, handlePullDown);</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      bScroll.off(<span class="string">"touchEnd"</span>, handlePullDown);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;, [pullDown, pullDownDebounce, bScroll]);</span><br><span class="line"></span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (refresh &amp;&amp; bScroll) &#123;</span><br><span class="line">      bScroll.refresh();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  useImperativeHandle(ref, () =&gt; (&#123;</span><br><span class="line">    refresh() &#123;</span><br><span class="line">      <span class="keyword">if</span> (bScroll) &#123;</span><br><span class="line">        bScroll.refresh();</span><br><span class="line">        bScroll.scrollTo(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    getBScroll() &#123;</span><br><span class="line">      <span class="keyword">if</span> (bScroll) &#123;</span><br><span class="line">        <span class="keyword">return</span> bScroll;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;));</span><br><span class="line">  <span class="keyword">const</span> PullUpdisplayStyle = pullUpLoading</span><br><span class="line">    ? &#123; <span class="attr">display</span>: <span class="string">""</span> &#125;</span><br><span class="line">    : &#123; <span class="attr">display</span>: <span class="string">"none"</span> &#125;;</span><br><span class="line">  <span class="keyword">const</span> PullDowndisplayStyle = pullDownLoading</span><br><span class="line">    ? &#123; <span class="attr">display</span>: <span class="string">""</span> &#125;</span><br><span class="line">    : &#123; <span class="attr">display</span>: <span class="string">"none"</span> &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;ScrollContainer ref=&#123;scrollContaninerRef&#125;&gt;</span><br><span class="line">      &#123;props.children&#125;</span><br><span class="line">      &#123;<span class="comment">/* æ»‘åˆ°åº•éƒ¨åŠ è½½åŠ¨ç”» */</span>&#125;</span><br><span class="line">      &lt;PullUpLoading style=&#123;PullUpdisplayStyle&#125;&gt;</span><br><span class="line">        &lt;Loading&gt;&lt;<span class="regexp">/Loading&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>PullUpLoading&gt;</span><br><span class="line">      &#123;<span class="comment">/* é¡¶éƒ¨ä¸‹æ‹‰åˆ·æ–°åŠ¨ç”» */</span>&#125;</span><br><span class="line">      &lt;PullDownLoading style=&#123;PullDowndisplayStyle&#125;&gt;</span><br><span class="line">        &lt;Loading2&gt;&lt;<span class="regexp">/Loading2&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>PullDownLoading&gt;</span><br><span class="line">    &lt;<span class="regexp">/ScrollContainer&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;);</span></span><br><span class="line"><span class="regexp">Scroll.defaultProps = &#123;</span></span><br><span class="line"><span class="regexp">  direction: "vertical",</span></span><br><span class="line"><span class="regexp">  click: true,</span></span><br><span class="line"><span class="regexp">  refresh: true,</span></span><br><span class="line"><span class="regexp">  onScroll: null,</span></span><br><span class="line"><span class="regexp">  pullUpLoading: false,</span></span><br><span class="line"><span class="regexp">  pullDownLoading: false,</span></span><br><span class="line"><span class="regexp">  pullUp: null,</span></span><br><span class="line"><span class="regexp">  pullDown: null,</span></span><br><span class="line"><span class="regexp">  bounceTop: true,</span></span><br><span class="line"><span class="regexp">  bounceBottom: true,</span></span><br><span class="line"><span class="regexp">&#125;;</span></span><br><span class="line"><span class="regexp">Scroll.propTypes = &#123;</span></span><br><span class="line"><span class="regexp">  direction: PropTypes.oneOf(["vertical", "horizental"]),</span></span><br><span class="line"><span class="regexp">  refresh: PropTypes.bool,</span></span><br><span class="line"><span class="regexp">  onScroll: PropTypes.func,</span></span><br><span class="line"><span class="regexp">  pullUp: PropTypes.func,</span></span><br><span class="line"><span class="regexp">  pullDown: PropTypes.func,</span></span><br><span class="line"><span class="regexp">  pullUpLoading: PropTypes.bool,</span></span><br><span class="line"><span class="regexp">  pullDownLoading: PropTypes.bool,</span></span><br><span class="line"><span class="regexp">  bounceTop: PropTypes.bool, /</span><span class="regexp">/æ˜¯å¦æ”¯æŒå‘ä¸Šå¸é¡¶</span></span><br><span class="line"><span class="regexp">  bounceBottom: PropTypes.bool, /</span><span class="regexp">/æ˜¯å¦æ”¯æŒå‘ä¸‹å¸é¡¶</span></span><br><span class="line"><span class="regexp">&#125;;</span></span><br><span class="line"><span class="regexp">export default Scroll;</span></span><br></pre></td></tr></table></figure>
</code></pre>
</details>

<p>è¿™é‡Œç”¨åˆ°çš„æ˜¯<a href="https://github.com/ustbhuangyi/better-scroll/blob/master/README_zh-CN.md" target="_blank" rel="noopener">better-scroll</a>,åŒæ ·çš„ï¼Œå› ä¸ºè¿™é‡Œç”¨åˆ°äº†better-scrollï¼Œä¸€è®²å¯èƒ½å°±æ˜¯ä¸€ç¯‡é•¿ç¯‡æ–‡ç« ã€‚</p>
<h3 id="21-å®Œæˆè½®æ’­å›¾å’Œscroll"><a href="#21-å®Œæˆè½®æ’­å›¾å’Œscroll" class="headerlink" title="21. å®Œæˆè½®æ’­å›¾å’Œscroll"></a>21. å®Œæˆè½®æ’­å›¾å’Œscroll</h3><p>ä¸Šé¢çš„æ“ä½œéƒ½å®Œæˆäº†ä¹‹åï¼Œç»ˆäºè¦å®Œæˆè½®æ’­å’Œæ»šåŠ¨äº†ã€‚</p>
<p>æ¥åˆ°recommendä¸‹index.js,åªè¦å¯¼å…¥scrollç„¶åsliderç”¨scrollåŒ…è£¹èµ·æ¥å°±å¥½äº†</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Scroll <span class="keyword">from</span> <span class="string">'../../baseUI/scroll/index'</span>;</span><br><span class="line">&lt;Scroll className=<span class="string">"list"</span> onScroll=&#123;forceCheck&#125;&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;Slider bannerList=&#123;bannerListJS&#125;&gt;&lt;<span class="regexp">/Slider&gt;</span></span><br><span class="line"><span class="regexp">      &lt;RecommendList recommendList=&#123;recommendListJS&#125;&gt;&lt;/</span>RecommendList&gt;</span><br><span class="line">  &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>Scroll&gt;</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨çš„æ•ˆæœå›¾å¦‚ä¸‹<br><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4d93a6d672cf4759aaee455f57e1c4f7~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p>
<h3 id="22-åˆ—è¡¨æ•°æ®api"><a href="#22-åˆ—è¡¨æ•°æ®api" class="headerlink" title="22. åˆ—è¡¨æ•°æ®api"></a>22. åˆ—è¡¨æ•°æ®api</h3><p>request.jsä¸‹å¢åŠ ä¸€æ¡è¯·æ±‚ åˆ—è¡¨æ•°æ®çš„æ–¹æ³•getRecommendListRequest</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; axiosInstance &#125; <span class="keyword">from</span> <span class="string">"./config"</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getBannerRequest = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> axiosInstance.get(<span class="string">"/banner"</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getRecommendListRequest = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> axiosInstance.get(<span class="string">"/personalized"</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="23-åˆ—è¡¨-redux"><a href="#23-åˆ—è¡¨-redux" class="headerlink" title="23. åˆ—è¡¨ redux"></a>23. åˆ—è¡¨ redux</h3><p>æ¥ä¸‹æ¥è½»è½¦ç†Ÿè·¯ï¼Œåˆæ˜¯åƒä¹‹å‰å†™ è½®æ’­å›¾ reduxä¸€æ · å†™ åˆ—è¡¨çš„ redux<br>è¿˜æ˜¯åŸæ¥çš„ recommend storeä¸‹çš„æ–‡ä»¶å¤¹<br>constants.js,å¢åŠ ä¸€ä¸ªå¸¸é‡,ç”¨äºè¯·æ±‚åˆ—è¡¨æ•°æ®</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> CHANGE_BANNER = <span class="string">'home/recommend/CHANGE_BANNER'</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> CHANGE_RECOMMEND_LIST = <span class="string">'home/recommend/RECOMMEND_LIST'</span>;</span><br></pre></td></tr></table></figure>

<p>actionCreators.js, è¯·æ±‚åˆ—è¡¨æ•°æ®çš„changeRecommendListï¼Œå¯ä»¥å¼‚æ­¥çš„getRecommendList</p>
<details style="background:#d0edf5"> 
<summary>actionCreators.js</summary>
<pre><code>
    <figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> changeRecommendList = <span class="function">(<span class="params">data</span>) =&gt;</span> (&#123;</span><br><span class="line">  type: actionTypes.CHANGE_RECOMMEND_LIST,</span><br><span class="line">  data: fromJS(data)</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getRecommendList = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">dispatch</span>) =&gt;</span> &#123;</span><br><span class="line">    getRecommendListRequest().then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">      dispatch(changeRecommendList(data.result));</span><br><span class="line">    &#125;).catch(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">"æ¨èæ­Œå•æ•°æ®ä¼ è¾“é”™è¯¯"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</code></pre>
</details>

<p>reducer.jsï¼Œå¢åŠ äº†å¦å¤–ä¸€ä¸ªåˆå§‹åŒ–recommenList,ä»¥åŠä¸€ä¸ªcase</p>
<details style="background:#d0edf5"> 
<summary>reducer.js</summary>
<pre><code>
    <figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> actionTypes <span class="keyword">from</span> <span class="string">"./constants"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; fromJS &#125; <span class="keyword">from</span> <span class="string">"immutable"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> defaultState = fromJS(&#123;</span><br><span class="line">  bannerList: [],</span><br><span class="line">  recommendList: [],</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (state = defaultState, action) =&gt; &#123;</span><br><span class="line">  <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">    <span class="keyword">case</span> actionTypes.CHANGE_BANNER:</span><br><span class="line">      <span class="keyword">return</span> state.set(<span class="string">"bannerList"</span>, action.data);</span><br><span class="line">    <span class="keyword">case</span> actionTypes.CHANGE_RECOMMEND_LIST:</span><br><span class="line">      <span class="keyword">return</span> state.set(<span class="string">"recommendList"</span>, action.data);</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">return</span> state;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</code></pre>
</details>

<h3 id="24-æ”¶å·¥"><a href="#24-æ”¶å·¥" class="headerlink" title="24 . æ”¶å·¥"></a>24 . æ”¶å·¥</h3><p>ç»å†äº†åˆ€å±±ç«æµ·ï¼Œæµ·æ¯çŸ³çƒ‚ï¼Œæ¥åˆ°äº†æœ€åä¸€æ­¥æ¸²æŸ“recommendList</p>
<p>recommend ä¸‹ index.js, è¿™é‡Œé¢é¦–å…ˆåœ¨mapStateToPropså’Œ mapDispatchToPropsåŠ ä¸Šç›¸åº”çš„æ•°æ®ï¼Œpropsè§£æ„stateå’Œactionæ–¹æ³•ï¼Œä¼ ç»™RecommendListç»„ä»¶(çªç„¶å‘ç°è¿™é‡Œè¿˜æœ‰ä¸ªç»„ä»¶ğŸ˜‚)<br>ä¸è¿‡è¿™ä¸ªç»„ä»¶æ²¡æœ‰ä»€ä¹ˆåˆ«çš„æ“ä½œï¼Œä»…ä»…åªæ˜¯æ‹¿åˆ°recommendç»™çš„æ•°æ®ç„¶åæ¸²æŸ“ï¼Œè¿™ä¸ªä»£ç å°±ä¸è´´äº†ï¼Œä¸‰å…ƒgithubä¸Šæœ‰å®Œæ•´çš„é¡¹ç›®ä»£ç </p>
<details style="background:#d0edf5"> 
<summary>index.js</summary>
<pre><code>
    <figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useEffect &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">"react-redux"</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> actionTypes <span class="keyword">from</span> <span class="string">"./store/actionCreators"</span>;</span><br><span class="line"><span class="keyword">import</span> Slider <span class="keyword">from</span> <span class="string">"../../components/slider/"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Content &#125; <span class="keyword">from</span> <span class="string">"./style"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; forceCheck &#125; <span class="keyword">from</span> <span class="string">'react-lazyload'</span>;</span><br><span class="line"><span class="keyword">import</span> Scroll <span class="keyword">from</span> <span class="string">'../../baseUI/scroll/index'</span>;</span><br><span class="line"><span class="keyword">import</span> RecommendList <span class="keyword">from</span> <span class="string">'../../components/list/'</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Recommend</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; bannerList, recommendList &#125; = props;</span><br><span class="line">  <span class="keyword">const</span> &#123; getBannerDataDispatch, getRecommendListDataDispatch &#125; = props;</span><br><span class="line"></span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!bannerList.size) &#123;</span><br><span class="line">      getBannerDataDispatch();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(!recommendList.size)&#123;</span><br><span class="line">      getRecommendListDataDispatch();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// eslint-disable-next-line</span></span><br><span class="line">  &#125;, []);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> bannerListJS = bannerList ? bannerList.toJS() : [];</span><br><span class="line">  <span class="keyword">const</span> recommendListJS = recommendList ? recommendList.toJS() :[];</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;Content&gt;</span><br><span class="line">       &lt;Scroll className=<span class="string">"list"</span> onScroll=&#123;forceCheck&#125;&gt;</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;Slider bannerList=&#123;bannerListJS&#125;&gt;&lt;<span class="regexp">/Slider&gt;</span></span><br><span class="line"><span class="regexp">        &lt;RecommendList recommendList=&#123;recommendListJS&#125;&gt;&lt;/</span>RecommendList&gt;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>Scroll&gt;</span><br><span class="line">    &lt;<span class="regexp">/Content&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ æ˜ å°„Reduxå…¨å±€çš„stateåˆ°ç»„ä»¶çš„propsä¸Š</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ recommend bannerList  æ˜¯å¯¹è±¡è·¯å¾„ï¼Œåœ¨recommend.recommendList</span></span><br><span class="line"><span class="regexp">const mapStateToProps = (state) =&gt; (&#123;</span></span><br><span class="line"><span class="regexp">  bannerList: state.getIn(["recommend", "bannerList"]),</span></span><br><span class="line"><span class="regexp">  recommendList: state.getIn(['recommend', 'recommendList']),</span></span><br><span class="line"><span class="regexp">&#125;);</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ æ˜ å°„dispatchåˆ°propsä¸Š</span></span><br><span class="line"><span class="regexp">const mapDispatchToProps = (dispatch) =&gt; &#123;</span></span><br><span class="line"><span class="regexp">  return &#123;</span></span><br><span class="line"><span class="regexp">    getBannerDataDispatch() &#123;</span></span><br><span class="line"><span class="regexp">      dispatch(actionTypes.getBannerList());</span></span><br><span class="line"><span class="regexp">    &#125;,</span></span><br><span class="line"><span class="regexp">    getRecommendListDataDispatch() &#123;</span></span><br><span class="line"><span class="regexp">      dispatch(actionTypes.getRecommendList());</span></span><br><span class="line"><span class="regexp">    &#125;,</span></span><br><span class="line"><span class="regexp">  &#125;;</span></span><br><span class="line"><span class="regexp">&#125;;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ å°†uiç»„ä»¶åŒ…è£…æˆå®¹å™¨ç»„ä»¶</span></span><br><span class="line"><span class="regexp">export default connect(</span></span><br><span class="line"><span class="regexp">  mapStateToProps,</span></span><br><span class="line"><span class="regexp">  mapDispatchToProps</span></span><br><span class="line"><span class="regexp">)(React.memo(Recommend));</span></span><br></pre></td></tr></table></figure>
</code></pre>
</details>
æœ€åæˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°äº†è¿™ä¸ªæ•ˆæœï¼Œä¸Šä¸‹æ‹‰åŠ¨çš„è¿‡ç¨‹ä½ ä¼šå‘ç°ï¼Œçºµäº«ä¸æ»‘~

<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/93b70da5c77640c8b0eb118573a5628b~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p>
<h2 id="25-å•¦å§å•¦å§"><a href="#25-å•¦å§å•¦å§" class="headerlink" title="25. å•¦å§å•¦å§"></a>25. å•¦å§å•¦å§</h2><p> ç›¸ä¿¡çœ‹åˆ°æœ€åçš„ä¼™ä¼´è‚¯å®šæœ‰æ‰€æ”¶è·ï¼Œå¦‚æœå¯¹æºç æ„Ÿå…´è¶£ï¼Œè¿™é‡Œæœ‰ ä¸‰å…ƒé¡¹ç›®çš„<a href="https://github.com/sanyuan0704/react-cloud-music" target="_blank" rel="noopener">githubæºç </a>,å½“ç„¶ï¼Œå¦‚æœæƒ³è¦æ·±å…¥å­¦ä¹ è¿™ä¸ªé¡¹ç›®ï¼Œä¸‰å…ƒè¿˜æœ‰ä¸ª<br> <a href="https://juejin.im/book/6844733816460804104/section/6844733816506941448" target="_blank" rel="noopener">å°å†Œ</a>ã€‚åŒæ—¶ï¼Œè¿™é‡Œè¿˜æœ‰ä¸€ä¸ªå®Œæ•´çš„é¡¹ç›®æ¼”ç¤º <a href="http://47.98.159.95:8010/#/recommend" target="_blank" rel="noopener">åœ°å€</a>ã€‚</p>
<p> æœ€åçš„æœ€åï¼Œå¦‚æœå†™çš„ä¸å¥½çš„åœ°æ–¹ï¼Œæ¬¢è¿æŒ‡æ­£ï¼Œæœ‰ä¸æ¸…æ¥šçš„åœ°æ–¹ä¹Ÿæ¬¢è¿æé—®~</p>
]]></content>
      <tags>
        <tag>react</tag>
      </tags>
  </entry>
</search>
